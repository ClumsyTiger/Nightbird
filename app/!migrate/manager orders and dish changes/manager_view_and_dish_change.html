<html>
    <head>
        <!-- <link rel="stylesheet" href="bootstrap.min.css"> -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

        <link rel='stylesheet' href='file:///C:/Users/Marina/Desktop/fontawesome-free-5.13.0-web/fontawesome-free-5.13.0-web/css/all.css'></link>
        <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <script>
            function order_Manager(objekat) {
                localStorage.setItem('inc',0);
                localStorage.setItem('weight',0);
                localStorage.setItem('price',0);

                var parametri=JSON.parse(objekat);

               // var niz=[];
               // niz = document.getElementsByClassName('dummy');
               var proba = document.getElementById('proba');
                var str = "";
               
                //for(let i = 0; i<niz.length; i++) {
                    str+= '<div class="row" style = "background-color:lightblue"><div class="col-sm-10"><p style = "font-size:14px; font-weight:bold;">'+ parametri.naslov +'</p>';
                    str+='</div> <div class="col-sm-1"> ' + parametri.ikonice[0].levo + '</div> <div class="col-sm-1">' + parametri.ikonice[1].desno + '</div></div>';
                    str+= '<div class = "row" style = "background-color:lightblue"><div class="col-sm-6"> <h6>' + parametri.korisnik + '</h6> </div>';
                    str+= '<div class="col-sm-6"> <h6>' + parametri.broj_gostiju + ' osoba </h6> </div> </div>';

                    str+= '<div class = "row" style = "background-color:lightblue"><div class="col-sm-6"> <h6>' + parametri.broj_telefona+ '</h6> </div>';
                    str+= '<div class="col-sm-6"> <h6>' + parametri.datum + '</h6> </div> </div>';

                    str +=  '<div class="row" style = "background-color:skyblue"><div class="col-sm-12">';
                    let ukupna_cena=0;
                    str += "<div class = 'row'><div class = 'col-sm-3 text-left' style = 'font-size:12px; font-weight:bold;' >Kolicina</div>";  
                        str += "<div class = 'col-sm-3' style = 'font-size:12px; font-weight:bold;'>Naziv jela</div>" ;  

                        str += "<div class = 'col-sm-3 text-right'style = 'font-size:12px; font-weight:bold;' >Gramaza</div>  <div class = 'col-sm-3 text-right'style = 'font-size:12px; font-weight:bold;' >Ukupna cena</div></div>";
                      

                    for (let j = 0; j<parametri.stavke.length; j++) {//while ima izvadjenih iz baze, dakle neki post/get/session niz count
                        str += "<div class = 'row'><div class = 'col-sm-3 text-left' >" + parametri.stavke[j].kolicina + "x </div>";  
                        str += "<div class = 'col-sm-3'>" + parametri.stavke[j].naziv_jela +"</div>" ;  

                        str += "<div class = 'col-sm-3 text-right' >"+ parametri.stavke[j].gramaza +"g</div><div class = 'col-sm-3 text-right' >"+ parametri.stavke[j].cena*parametri.stavke[j].kolicina + "din</div></div>";
                        ukupna_cena+=parametri.stavke[j].cena*parametri.stavke[j].kolicina;
                        //style = 'float:right;
                    }

                   if(parametri.popust!=null){

                        str += "<div class = 'row'  style = 'background-color:skyblue'><div class = 'col-sm-3 text-left' > ! </div>";                      
                        str += "<div class = 'col-sm-6'> Popust 10%</div>" ;                               
                        str += "<div class = 'col-sm-3 text-right'>"+ ukupna_cena/10  + "din</div></div>";
                  }

                  else {
                        str += "<div class = 'row'><div class = 'col-sm-3 text-left' > ! </div>";             
                        str += "<div class = 'col-sm-6'> Niste ostvarili pravo na popust  </div>" ;             
                        str += "<div class = 'col-sm-3 text-right' ></div></div>";
                  }
                   // str += '<br/>';
                    let popust = ukupna_cena/10;
                    let ukupna_masa = 0;
                    for (let j = 0; j<parametri.stavke.length; j++) 
                        ukupna_masa+=parametri.stavke[j].gramaza;

                    let final_cena = ukupna_cena - popust;


                        str += '<hr>';
                        str += "<div class = 'row'><div class = 'col-sm-3 text-left' ></div>";             
                        str += "<div class = 'col-sm-3'>"+parametri.broj_gostiju+" osoba</div>" ; 
                        str += "<div class = 'col-sm-3 text-right'>"+ukupna_masa+"g</div>" ;            
                        str += "<div class = 'col-sm-3 text-right' >"+final_cena+"</div></div>";                     
                        str+='</div></div>';


                   
                   // niz[i].innerHTML=str;
                   proba.innerHTML=str;
                    str = "";

                 

            }





            function ucitaj() {
                
                let obj = {
                    id:0,
                    naslov:'Jockin 21. rodjendan',
                    korisnik: 'jocka99',
                    broj_gostiju: 15,
                    broj_telefona: '069 1234567',
                    datum: '10.10.2020.' , //promeniti format u date, u skladu s bazom
                    stavke: [{naziv_jela:'pasulj', kolicina:5, cena:400, gramaza:150}, {naziv_jela:'pljeskavica', kolicina:30, cena:250, gramaza:200}, {naziv_jela:'pecenje', kolicina:3, cena:1400, gramaza:1000}],
                    popust: '10%',
                    ikonice: [{levo:0}, {desno:1}]
                }
                order_Manager(JSON.stringify(obj)); 
                menjanje_temp();
            }



            function menanje(obj) {

            }


            function menjanje_temp() {
                var temp = document.getElementById('menjanje_temp');
                var str ="";
                //vidi za formu
                str+='<div >'
                str+='<form id = "menjanje_jela_temp" name = "menjanje_jela_temp" method = "POST" ><div class = "row" style = "background-color:lightblue;" onclick = "add_picture()"><div class = col-sm-11>';
                str+='<input type = "text" name = "naziv_jela" placeholder = "Unesite naziv jela" style = "margin-top:4px; margin-bottom:4px;"></div>';
                //stiklica
                str+='<div class = "col-sm-1"" > <img src = "baseline_done_black_18dp.png" width = "20px" height = "20px" onclick="potvrdi_promenu()">   </div></div>';
                str+='<div class = "row" style = "background-color:lightblue;" onclick = "add_picture()"><div class="col-sm-11">';
                str+='<select name="vrsta_jela_temp" id="vrsta_jela_temp" class = "opcija" value = "Vrsta jela" style = "margin-bottom:4px"><option value="Predjelo">Predjelo</option><option value="Kuvano jelo">Kuvano jelo</option><option value="Rostilj">Rostilj</option><option value="Salata">Salata</option><option value="Supa">Supa</option><option value="Corba">Corba</option><option value="Riba">Riba</option><option value="Morski plodovi">Morski plodovi</option><option value="Pasta">Pasta</option><option value="Pica">Pica</option><option value="Pita">Pita</option><option value="Kolac">Kolac</option><option value="Pecivo">Pecivo</option><option value="Torta">Torta</option></select>';
                str+='<select name="ukus_temp" id="ukus_temp" class = "opcija" value = "Ukus" style = "margin-bottom:4px"><option value="Slatko">Slatko</option><option value="Slano">Slano</option><option value="Ljuto">Ljuto</option></select>';
                str+='<select name="dijeta_temp" id="dijeta_temp" class = "opcija" value = "Dijeta" style = "margin-bottom:4px"><option value="Posno">Posno</option><option value="Vegeterijansko">Vegeterijansko</option><option value="Bez glutena">Bez glutena</option></select>';
                str+='</div><div class= "col-sm-1"><img src = "baseline_visibility_black_18dp.png" width = "20px" height = "20px"> </div></div>';
                //'<select name="vrsta_jela_temp" id="vrsta_jela_temp"><option value="Predjelo"></option><option value="Kuvano jelo"></option><option value="Rostilj"></option><option value="Salata"></option><option value="Supa"></option><option value="Corba"></option><option value="Riba"></option><option value="Morski plodovi"></option><option value="Pasta"></option><option value="Pica"></option><option value="Pita"></option><option value="Kolac"></option><option value="Pecivo"></option><option value="Torta"></option></select>';
               // '<select name="ukus_temp" id="ukus_temp"><option value="Slatko"></option><option value="Slano"></option><option value="Ljuto"></option></select>';
                //'<select name="dijeta_temp" id="dijeta_temp"><option value="Posno"></option><option value="Vegeterijansko"></option><option value="Bez glutena"></option></select>';
                str+='<div class = "row" style = "background-color:lightblue;" onclick = "add_picture()"><div class = "col-sm-12 text-right"> <img src = "baseline_delete_black_18dp.png" width = "20px" height = "20px"></div></div> ';
                str+='<div class = "row" style = "background-color:lightblue;" onclick = "add_picture()"><div class = "col-sm-12 "> <textarea  draggable="false" style = "margin-bottom:4px;" name="opis_jela_temp" form="menjanje_jela_temp" placeholder = "Unesite opis novog jela" rows = "10" cols="70" ></textarea></div></div> ';
                str+='<div class = "row" style = "background-color:lightblue;" onclick = "add_picture()"><div class = "col-sm-12 text-right" style = "margin-bottom:4px"> <input type="text" name="gramaza_temp" id="gramaza_temp" placeholder="Gramaza"><input type="text" name="cena_temp" id="cena_temp" placeholder="Cena"> </div></div> ';
                
                str+='</form>';
                str+='</div>'
               
                temp.innerHTML=str;


            }
           // <input type="textarea" width="400" height = "300" name = "opis_jela_temp" id = "opis_jela_temp">

           function potvrdi_promenu() {
                obj = {
                    naziv_jela:"",
                    vrsta_jela:"",
                    ukus:"",
                    dijeta:"",
                    cena:0,
                    gramaza:0,
                    opis:""
                 };// vidi za ;
                let forma= document.getElementById("menjanje_jela_temp");
                //mogao sam i svako jelo da dohvatam rucno, preko getElementById;
                let prom = forma.naziv_jela.value;
                obj.naziv_jela=prom;
                prom = forma.vrsta_jela_temp.value;
                obj.vrsta_jela=prom;
                prom = forma.dijeta_temp.value;
                obj.dijeta=prom;
                prom = forma.ukus_temp.value;
                obj.ukus= prom;
                prom = forma.cena_temp.value;
                obj.cena= prom;
                prom = forma.gramaza_temp.value;
                obj.gramaza = prom;
                obj.opis= forma.opis_jela_temp.value;               
                //alert(JSON.stringify(obj));

            }
            
            function add_picture() {
                alert("usao u dodavanje");
            }
           



        </script>
    </head>
    <body onload='ucitaj()'>
      
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div class = 'dummy' id='proba' style = 'margin-bottom: 20px;'>
                       

                    </div>
    
                </div>
                <div class="col-sm-6">
                    <div class = 'dummy' id = 'menjanje'>
                      


                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class = 'dummy' id = 'menjanje_temp'>
                       

                    </div>

                </div>
                <div class="col-sm-6">
                    <div class = 'dummy'>
                      
                        

                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class = 'dummy'>
                       

                    </div>

                </div>
                <div class="col-sm-6">
                    <div class = 'dummy'>
                        

                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class = 'dummy'>
                        

                    </div>

                </div>
                <div class="col-sm-6">
                    <div class = 'dummy'>
                        

                    </div>

                </div>
            </div>

        </div>
     
    
    </body>
</html>
















